Bootstrap: docker

From: ubuntu:16.04

%post
	apt-get -y update
	apt-get -y install python3
	apt-get -y install cmake
	apt-get -y install lsb-release
	apt-get -y install wget
	apt-get -y install unzip
	sh -c 'echo "deb http://packages.osrfoundation.org/gazebo/ubuntu-stable `lsb_release -cs` main" > /etc/apt/sources.list.d/gazebo-stable.list'
	wget http://packages.osrfoundation.org/gazebo.key -O - | apt-key add -
	apt-get -y update
	apt-get -y install gazebo7
	apt-get -y install libgazebo7-dev
	
	
	mkdir -p /local
#	echo 'source /usr/share/gazebo/setup.sh' >> ~/.bashrc
%environment
	# /usr/share/gazebo/setup.sh
	export GAZEBO_MASTER_URI=http://localhost:11345
	export GAZEBO_MODEL_DATABASE_URI=http://models.gazebosim.org
	export GAZEBO_RESOURCE_PATH=/usr/share/gazebo-7:${GAZEBO_RESOURCE_PATH}
	export GAZEBO_PLUGIN_PATH=/usr/lib/x86_64-linux-gnu/gazebo-7/plugins:${GAZEBO_PLUGIN_PATH}
	export GAZEBO_MODEL_PATH=/usr/share/gazebo-7/models:${GAZEBO_MODEL_PATH}
	export LD_LIBRARY_PATH=${LD_LIBRARY_PATH}:/usr/lib/x86_64-linux-gnu/gazebo-7/plugins
	export OGRE_RESOURCE_PATH=/usr/lib/x86_64-linux-gnu/OGRE-1.9.0

	# custom environment variables
	export LC_ALL=C.UTF-8
	export GAZEBO_RESOURCE_PATH=$PWD/sources:$GAZEBO_RESOURCE_PATH
	export GAZEBO_PLUGIN_PATH=$PWD/compiled_plugins:$GAZEBO_PLUGIN_PATH
	export GAZEBO_MODEL_PATH=$PWD/sources:$GAZEBO_MODEL_PATH
	export LD_LIBRARY_PATH=$PWD/sources:$LD_LIBRARY_PATH
	export QT_STYLE_OVERRIDE=gtk2

%runscript
	"$@"
